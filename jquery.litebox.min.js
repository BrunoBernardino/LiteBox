// liteBox v2.0.1 by Bruno Bernardino | 2013.06.21 | https://github.com/BrunoBernardino/LiteBox
(function(e,t,n){var r,i,s;i={generateID:function(){var e;e=function(){return((1+n.Math.random())*65536|0).toString(16).substring(1)};return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}};r={galleries:[],currentGallery:"",currentGalleryIndex:-1,options:{}};s={init:function(t){var n;n={liteboxID:"litebox",backgroundClass:"litebox-background",wrapperClass:"litebox-wrapper",contentClass:"litebox-content",closeButtonClass:"litebox-close",arrowButtonClass:"litebox-arrow",leftArrowButtonAddedClass:"left",rightArrowButtonAddedClass:"right",liteboxMainTemplateID:"templates-litebox",liteboxImageTemplateID:"templates-litebox-image",liteboxIFrameTemplateID:"templates-litebox-iframe",liteboxHTMLTemplateID:"templates-litebox-html",htmlClass:"html",isModal:false,escapeCloses:true,arrowKeysNavigate:true,animationType:"fade",animationSpeed:"fast",openOnComplete:e.noop,dataLitebox:"liteboxItemOptions"};t=e.extend(n,t);r.options=e.extend({},t);s.create.call(this,t);this.each(function(){var n,i,o,u,a,f;n=e(this);i=n.data("litebox");if(!i){a={gallery:"",alt:"",type:"image"};f=e.extend(a,n.data(t.dataLitebox));o=-1;if(f.gallery.length>0){if(!e.isArray(r.galleries[f.gallery])){r.galleries[f.gallery]=[]}u={src:n.attr("href"),alt:f.alt};o=r.galleries[f.gallery].push(u)-1}n.data("litebox",{target:n,options:f,galleryIndex:o});return e(this).on("click.litebox",function(e){e.preventDefault();return s.open.call(this,t)})}});return true},destroy:function(){e(n).off(".litebox");this.each(function(){var t,n;t=e(this);n=t.data("litebox");return t.removeData("litebox")});return true},create:function(i){var o;if(typeof i==="undefined"){i=r.options}if(e("#"+i.liteboxID).length>0){return false}else{o=t.template(e("#"+i.liteboxMainTemplateID).html(),{liteboxID:i.liteboxID,backgroundClass:i.backgroundClass,wrapperClass:i.wrapperClass,closeButtonClass:i.closeButtonClass,arrowButtonClass:i.arrowButtonClass,leftArrowButtonAddedClass:i.leftArrowButtonAddedClass,rightArrowButtonAddedClass:i.rightArrowButtonAddedClass,contentClass:i.contentClass});e("body").append(o);if(i.escapeCloses){e(document).on("keydown.litebox",function(t){if(e("#"+i.liteboxID).is(":visible")){if(t.keyCode===27){t.preventDefault();return s.close.call(this,i)}}})}if(!i.isModal){e("#"+i.liteboxID+"-background").on("click.litebox",function(e){e.preventDefault();return s.close.call(this,i)})}if(i.arrowKeysNavigate){e(document).on("keydown.litebox",function(t){if(e("#"+i.liteboxID).is(":visible")){if(t.keyCode===37){t.preventDefault();return s.navigateLeft.call(this,i)}else if(t.keyCode===39){t.preventDefault();return s.navigateRight.call(this,i)}}})}e("#"+i.liteboxID+" ."+i.arrowButtonClass).on("click.litebox",function(t){t.preventDefault();if(e(this).hasClass(i.leftArrowButtonAddedClass)){return s.navigateLeft.call(this,i)}else{if(e(this).hasClass(i.rightArrowButtonAddedClass)){return s.navigateRight.call(this,i)}}});e("#"+i.liteboxID+" ."+i.closeButtonClass).on("click.litebox",function(e){e.preventDefault();return s.close.call(this,i)});e(n).on("resize.litebox",function(){return s.positionOnCenter.call(this,i)})}return true},open:function(t){var i,o,u,a,f,l,c;i=e(this);o=i.data("litebox");f=o.options;a=o.galleryIndex;if(typeof t==="undefined"){t=r.options}if(!o){return false}e("#"+t.liteboxID+"-background").fadeIn("fast");u=function(){switch(f.type){case"iframe":return s.showIFrame.call(this,t,i.attr("href"));case"html":return s.showHTML.call(this,t,i.attr("href"));default:return s.showImage.call(this,t,f.gallery,a,i.attr("href"),f.alt)}};switch(t.animationType){case"slide":l=e("#"+t.liteboxID).css("margin-top");e("#"+t.liteboxID).css({"margin-top":(e("#"+t.liteboxID).outerHeight()*2+n.parseInt(e("#"+t.liteboxID).css("top"),10))*-1+"px",display:"block",opacity:0}).animate({"margin-top":l,opacity:1},t.animationSpeed,u);break;case"zoom":c=e("#"+t.liteboxID).css("zoom");e("#"+t.liteboxID).css({zoom:c/3,display:"block",opacity:0}).animate({zoom:c,opacity:1},t.animationSpeed,u);break;default:e("#"+t.liteboxID).fadeIn(t.animationSpeed,u)}return true},close:function(t){if(typeof t==="undefined"){t=r.options}if(!e("#"+t.liteboxID).length){return false}e("#"+t.liteboxID).fadeOut("fast",function(){return e("#"+t.liteboxID+"-content").empty()});e("#"+t.liteboxID+"-background").fadeOut("fast");r.currentGallery="";r.currentGalleryIndex=-1;e("#"+t.liteboxID+" ."+t.arrowButtonClass).hide();return true},positionOnCenter:function(t){var i,s,o,u;if(typeof t==="undefined"){t=r.options}if(!e("#"+t.liteboxID).length){return false}if(e("#"+t.liteboxID).length>0){s=0;i=0;u=-5;o=-5;while(n.Math.abs(s-u)>1||n.Math.abs(i-o)>1){u=s;o=i;s=e("#"+t.liteboxID).outerWidth();i=e("#"+t.liteboxID).outerHeight();e("#"+t.liteboxID).css({"margin-left":s/2*-1+"px","margin-top":i/2*-1+"px"})}}return true},showOrHideArrows:function(t,n,i){if(typeof t==="undefined"){t=r.options}if(!e("#"+t.liteboxID).length){return false}if(n.length>1){if(i>=0){e("#"+t.liteboxID+" ."+t.arrowButtonClass).show();if(i===r.galleries[n].length-1){e("#"+t.liteboxID+" ."+t.arrowButtonClass+"."+t.rightArrowButtonAddedClass).hide()}if(i===0){e("#"+t.liteboxID+" ."+t.arrowButtonClass+"."+t.leftArrowButtonAddedClass).hide()}}}return true},showImage:function(n,o,u,a,f){var l;if(typeof n==="undefined"){n=r.options}if(!e("#"+n.liteboxID).length){return false}l=new Image;l.onload=function(){var c,h;c=i.generateID.call(this);h=t.template(e("#"+n.liteboxImageTemplateID).html(),{liteboxID:n.liteboxID,generatedID:c,imageSrc:a,imageAlt:f});e("#"+n.liteboxID+"-content").html(h);s.positionOnCenter.call(this,n);r.currentGallery=o;r.currentGalleryIndex=u;s.showOrHideArrows.call(this,n,o,u);l.onload=function(){};if(e.isFunction(n.openOnComplete)){return n.openOnComplete.call(this,n)}};l.src=a;return true},navigateTo:function(t,n){if(typeof t==="undefined"){t=r.options}if(!e("#"+t.liteboxID).length){return false}if(r.galleries[r.currentGallery][n]){s.showImage.call(this,t,r.currentGallery,n,r.galleries[r.currentGallery][n].src,r.galleries[r.currentGallery][n].alt)}return true},navigateLeft:function(t){var n;if(typeof t==="undefined"){t=r.options}if(!e("#"+t.liteboxID).length){return false}if(r.currentGallery.length>0){n=r.currentGalleryIndex-1;if(n<0){return false}s.navigateTo.call(this,t,n)}return true},navigateRight:function(t){var n;if(typeof t==="undefined"){t=r.options}if(!e("#"+t.liteboxID).length){return false}if(r.currentGallery.length>0){n=r.currentGalleryIndex+1;if(n>r.galleries[r.currentGallery].length-1){return false}s.navigateTo.call(this,t,n)}return true},showIFrame:function(n,o){var u,a;if(typeof n==="undefined"){n=r.options}u=i.generateID.call(this);a=t.template(e("#"+n.liteboxIFrameTemplateID).html(),{liteboxID:n.liteboxID,generatedID:u,iframeURL:o});e("#"+n.liteboxID+"-content").html(a);s.positionOnCenter.call(this,n);if(e.isFunction(n.openOnComplete)){n.openOnComplete.call(this,n)}return true},showHTML:function(n,o){var u,a;if(typeof n==="undefined"){n=r.options}a=i.generateID.call(this);u=t.template(e("#"+n.liteboxHTMLTemplateID).html(),{liteboxID:n.liteboxID,generatedID:a,htmlClass:n.htmlClass,htmlContent:e(o).html()});e("#"+n.liteboxID+"-content").html(u);s.positionOnCenter.call(this,n);if(e.isFunction(n.openOnComplete)){n.openOnComplete.call(this,n)}return true}};e.fn.litebox=function(t){if(s[t]){s[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){s.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.litebox")}return true};return true})(jQuery,_,window);